{"version":3,"file":"script.min.js","sources":["script.js"],"names":["BX","window","repo","uploader","d","params","this","controller","controlId","button","editor","AvatarEditor","addCustomEvent","delegate","addFile","bind","click","init","template","message","replace","inputName","INPUT","e","debug","prototype","agent","Uploader","getInstance","id","CID","streams","uploadFormData","uploadMethod","uploadFileUrl","allowUpload","allowUploadExt","uploadMaxFilesize","showImage","sortItems","input","dropZone","parentNode","placeHolder","fields","thumb","tagName","fileEvents","onFileIsAttached","onFileIsAppended","onFileIsBound","onFileIsReadyToFrame","onUploadStart","onUploadProgress","onUploadDone","onUploadError","onUploadRestore","onAttachFiles","onQueueIsChanged","onFileIsInited","pack","t","mfi_mode","cid","moduleId","forceMd5","limits","mfi_sign","i","hasOwnProperty","post","data","size","length","ar1","ar2","name","values","findChildren","ii","findChild","attribute","data-bx-role","push","innerHTML","file_id","value","onAttach","inited","checkUploadControl","getItems","removeAttribute","setAttribute","files","error","n","deleteFile","getFirst","pop","acceptableL","onError","onCustomEvent","file","item","node","getItem","bindEventsHandlers","n1","proxy","parentCanvas","props","UploaderUtils","scaleImage","width","height","c","create","appendChild","getContext","drawImage","source","x","y","destin","canvas","PreventDefault","showFile","tmp_url","href","getAttribute","pointer","fileID","sessid","bitrix_sessid","ajax","v","nDelName","indexOf","substr","node1","type","unbindAll","fileId","hash","_deleteFile","clear","addClass","progress","Math","min","__progressBarWidth","ceil","adjust","style","text","result","removeClass","html","ext","toDataURL","toLowerCase","getFormattedSize","RegExp","toUpperCase","justUploaded","remove","attr","specify","attrs","className","stream","pIndex","defaultErrorText","errorText","isArray","join","queue","items","MFInput","get"],"mappings":"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"}